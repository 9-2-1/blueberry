# Blueberry

Blueberry 是一个帮助跟踪任务进度和计算 Goldie 点数的工具，通过直观的方式展示任务完成情况和时间管理状态。

## 功能特点

- 任务进度跟踪：记录和统计各项任务的完成情况
- 点数系统：通过 Goldie 点数反映整体任务状态，大于0表示正常进行，小于0表示进度落后
- 实时监控：支持通过网页实时查看点数变化
- 报告生成：生成详细的任务进度报告，包括每日用时、剩余时间和预计完成情况

## 安装说明

### 前提条件

- Python 3.8+
- 相关依赖包（见 requirements.txt）

### 安装步骤

1. 克隆或下载项目到本地
2. 安装依赖包：
   ```
   pip install -r requirements.txt
   ```

## 使用方法

### 生成报告

直接运行主程序生成任务报告：

```
python -m blueberry
```

生成的报告会在控制台显示。

### 简化报告

生成只包含关键信息的简化报告：

```
python -m blueberry -s
```

### 实时网页监控

启动网页服务器实时查看点数变化：

```
python -m blueberry -l
```

然后在浏览器中访问 http://localhost:26019  
**小心，默认监听127.0.0.1，这意味着只有本地才能访问。如果想要在其他电脑用IP方式访问，可以使用 `-H 0.0.0.0` 参数，但这会让处于同一网络的人可以通过扫描IP的方式发现**  
不过，即使被扫描发现，对方也只能看到点数。除了当前点数之外的数据不会泄露。

### 命令行参数

- `-l, --live`: 开启实时点数显示HTTP网页
- `-f, --from`: 指定开始时间（格式：YYYY-MM-DDTHH:MM[:SS]）
- `-t, --time`: 指定当前时间
- `-d, --daily`: 显示今日完成
- `-f, --from`: 指定开始时间（格式：YYYY-MM-DDTHH:MM[:SS]）
- `-t, --time, --to`: 指定当前时间（默认为现在）
- `-w, --workbook`: 指定表格文件路径（默认：记录.xlsx）
- `-c, --changes`: 只显示变化
- `-d, --daily`: 显示今日完成
- `-s, --short`: 生成简化报告
- `-v, --verbose`: 详细格式
- `-u, --upcoming-days`: 隐藏指定天数后开始的项目
- `-D, --olddiff`: 使用旧→新格式，不用新(±变化)格式
- `-I, --no-info`: 不显示说明
- `-o, --output`: 输出文件路径
- `-n, --nologging`: 不保存报告为文件

## 点数计算说明

Goldie点数综合考虑以下因素：

- 任务进度：根据完成百分比和预计时间计算
- 状态影响：当前生效的状态会增减点数
- 其他任务：近期(3天内)完成的其他任务会增加点数

点数规则：

- 大于0表示正常进行
- 小于0意味着无法达到预期
- 颜色标识：红 < -500 < 橙 < -200 < 黄 < 0 < 绿 < 200 < 青 < 500 < 蓝

## 隐藏机制说明

- **工作时段计算**：仅在工作时段内计算预期可用时间和平均速度，休息时段点数不会自然下降
- **推荐用时配置**：默认工作时长为6.5小时/天（8小时×80%工作-休息比），可在 `config.py` 中修改

## 数据文件格式

任务数据存储在Excel表格（记录.xlsx）中。
查看 `记录示例.xlsx` (等一等，我不能直接发我现在正在用的表格) 来了解数据文件的具体格式。
直接把 `记录示例.xlsx` 重命名为 `记录.xlsx` 即可开始使用。
